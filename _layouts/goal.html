{% include head.html %}
{% include header.html %}

<div class="container">
    {% include components/goal/breadcrumbs.html %}
    {% if site.create_goals.previous_next_links %}
    {% include components/previous-next-links.html previous_label=page.t.goal.previous next_label=page.t.goal.next %}
    {% endif %}
</div>

{% include components/goal/header.html %}

{% assign goal_indicators = page.indicators | where: 'goal_number', page.goal.number %}
{% assign show_progress = false %}
{% for indicator in goal_indicators %}
{% if indicator.progress_status and indicator.progress_status != '' %}
{% assign show_progress = true %}
{% endif %}
{% endfor %}


<div style="background: #000; color: #ff00ff; padding: 20px; font-family: monospace;">
    <h3>üîç DEBUG: GLOBAL TARGETS OBJECT</h3>
    <textarea style="width: 100%; height: 200px; background: #222; color: #ff00ff;">
        {{ site.translations.uk.global_targets | inspect }}
    </textarea>

    <h3>üîç DEBUG: ARCHIVE TARGETS OBJECT</h3>
    <textarea style="width: 100%; height: 200px; background: #222; color: #ff00ff;">
        {{ site.translations.uk.archive_targets | inspect }}
    </textarea>
</div>

<div id="main-content" class="container" role="main">

    {% include components/goal/goal-content.html content=content %}

    <div class="container g-0 {% if show_progress %}goal-showing-progress{% endif %}">

        <div class="row align-items-end">
            <div class="col">
                <h2 class="goal-page-heading">{{ page.t.general.targets_and_indicators }}</h2>
            </div>
            {% if show_progress %}
            <div class="col-lg-2 d-none d-lg-block progress-column-header">
                <span aria-hidden="true">{{ site.progress_status.status_help | t | default: page.t.status.progress_help }}</span>
            </div>
            {% endif %}
        </div>
        <hr class="goal-page-column-header-rule">

        <ul class="nav nav-tabs edition-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#current-edition" aria-controls="current-edition" role="tab" data-bs-toggle="tab">
                    <div class="tab-content-wrapper">
                        <span class="radio-dot"></span>
                        <div class="text-group">
                            <span class="tab-title">–†–µ–¥–∞–∫—Ü—ñ—è —Ä–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è –ö–∞–±—ñ–Ω–µ—Ç—É –ú—ñ–Ω—ñ—Å—Ç—Ä—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ –≤—ñ–¥ 29.11.2024 ‚Ññ 1190-—Ä</span>
                            <span class="badge-edition badge-current">–ß–ò–ù–ù–ê</span>
                        </div>
                    </div>
                </a>
            </li>
            <li role="presentation">
                <a href="#archive-edition" aria-controls="archive-edition" role="tab" data-bs-toggle="tab">
                    <div class="tab-content-wrapper">
                        <span class="radio-dot"></span>
                        <div class="text-group">
                            <span class="tab-title">–†–µ–¥–∞–∫—Ü—ñ—è —Ä–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è –ö–∞–±—ñ–Ω–µ—Ç—É –ú—ñ–Ω—ñ—Å—Ç—Ä—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ –≤—ñ–¥ 21.08.2019 ‚Ññ 686-—Ä</span>
                            <span class="badge-edition badge-archive">–ü–û–ü–ï–†–ï–î–ù–Ø</span>
                        </div>
                    </div>
                </a>
            </li>
        </ul>

        <div id="current-edition" class="custom-tab-content active">
            {% assign current_list = "" | split: "" %}
            {% for ind in goal_indicators %}
                {% unless ind.indicator_id contains "a" %}
                {% assign current_list = current_list | push: ind %}
                {% endunless %}
            {% endfor %}

            {% assign grouped_current = current_list | group_by: 'target_number' %}

            {% for group in grouped_current %}
                {% assign target = group.name | sdg_lookup %}
                <div class="row goal-target">
                    <div class="col-auto"><strong>{{ target.number }}</strong></div>
                    <div class="col">{{ target.name }}</div>
                </div>
                {% for indicator in group.items %}
                    <div class="row goal-indicator" style="margin-left: 20px;">
                        <div class="col-auto">{{ indicator.number }}</div>
                        <div class="col"><a href="{{ indicator.url }}">{{ indicator.name }}</a></div>
                    </div>
                {% endfor %}
                <hr>
            {% endfor %}
        </div>

        <div id="archive-edition" class="custom-tab-content">
            {% assign archive_list = "" | split: "" %}
            {% for ind in goal_indicators %}
                {% if ind.indicator_id contains "a" %}
                    {% assign archive_list = archive_list | push: ind %}
                {% endif %}
            {% endfor %}

            {% assign grouped_archive = archive_list | group_by: 'target_number' %}

            {% for group in grouped_archive %}
                {% assign target_base = group.name | replace: ".", "-" %}
                {% assign target_key = target_base | append: "-title" %}
                    <div class="row goal-target">
                        <div class="col-auto"><strong>{{ group.name }}</strong></div>
                        <div class="col">{{ site.translations.uk.global_targets[target_key] }}</div>
                    </div>
                {% for indicator in group.items %}
                    <div class="row goal-indicator" style="margin-left: 20px;">
                        <div class="col-auto">{{ indicator.number }}</div>
                        <div class="col"><a href="{{ indicator.url }}">{{ indicator.name }}</a></div>
                    </div>
                {% endfor %}
                <hr>
            {% endfor %}
        </div>

    </div>
    {% include back-to-top.html %}
</div>

{% include footer.html %}
