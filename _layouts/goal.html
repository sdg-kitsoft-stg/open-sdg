{% include head.html %}
{% include header.html %}

<div class="container">
    {% include components/goal/breadcrumbs.html %}
    {% if site.create_goals.previous_next_links %}
    {% include components/previous-next-links.html previous_label=page.t.goal.previous next_label=page.t.goal.next %}
    {% endif %}
</div>

{% include components/goal/header.html %}

{% assign goal_indicators = page.indicators | where: 'goal_number', page.goal.number %}
{% assign show_progress = false %}
{% for indicator in goal_indicators %}
{% if indicator.progress_status and indicator.progress_status != '' %}
{% assign show_progress = true %}
{% endif %}
{% endfor %}

<div id="main-content" class="container" role="main">

    {% include components/goal/goal-content.html content=content %}

    <div class="container g-0 {% if show_progress %}goal-showing-progress{% endif %}">

        <div class="row align-items-end">
            <div class="col">
                <h2 class="goal-page-heading">{{ page.t.general.targets_and_indicators }}</h2>
            </div>
            {% if show_progress %}
            <div class="col-lg-2 d-none d-lg-block progress-column-header">
                <span aria-hidden="true">{{ site.progress_status.status_help | t | default: page.t.status.progress_help }}</span>
            </div>
            {% endif %}
        </div>
        <hr class="goal-page-column-header-rule">

        <ul class="nav nav-tabs edition-tabs" role="tablist">
            <li role="presentation">
                <a href="#current-edition" class="active" aria-controls="current-edition" role="tab" data-bs-toggle="tab">
                    <div class="tab-content-wrapper">
                        <span class="radio-dot"></span>
                        <div class="text-group">
                            <span class="tab-title">Редакція розпорядження Кабінету Міністрів України від 29.11.2024 № 1190-р</span>
                            <span class="badge-edition badge-current">ЧИННА</span>
                        </div>
                    </div>
                </a>
            </li>
            <li role="presentation">
                <a href="#archive-edition" aria-controls="archive-edition" role="tab" data-bs-toggle="tab">
                    <div class="tab-content-wrapper">
                        <span class="radio-dot"></span>
                        <div class="text-group">
                            <span class="tab-title">Редакція розпорядження Кабінету Міністрів України від 21.08.2019 № 686-р</span>
                            <span class="badge-edition badge-archive">ПОПЕРЕДНЯ</span>
                        </div>
                    </div>
                </a>
            </li>
        </ul>

        <div class="tab-content edition-tabs-content border-0 p-0">
            <div class="tab-pane active" id="current-edition" role="tabpanel">
                <div style="margin-top: 20px;"></div>

                {% assign last_target = "" %}

                {% for ind in goal_indicators %}
                {% if ind.slug contains "-a" %}{% continue %}{% endif %}

                {% if ind.target_number != last_target %}

                {% if last_target != "" %}<hr class="goal-page-target-rule">{% endif %}

                {% assign target = ind.target_number | sdg_lookup %}
                <div class="row align-items-start goal-target">
                    <div class="col-auto"><h3>{{ target.number }}</h3></div>
                    <div class="col"><h3>{{ target.name }}</h3></div>
                </div>

                {% assign last_target = ind.target_number %}
                {% endif %}

                <div class="row align-items-start goal-indicator" style="margin-left: 20px;">
                    <div class="col-auto"><h4>{{ ind.number }}</h4></div>
                    <div class="col"><a href="{{ ind.url }}">{{ ind.name }}</a></div>
                    {% include components/indicator/tags.html tags=ind.tags reporting_status=true indicator=ind %}
                </div>
                {% endfor %}

                <hr class="goal-page-target-rule">
            </div>

            <div class="tab-pane" id="archive-edition" role="tabpanel">
                <div style="margin-top: 20px;"></div>

                {% assign last_archive_target = "" %}
                {% assign has_archive_data = false %}

                {% for ind in goal_indicators %}
                {% unless ind.slug contains "-a" %}{% continue %}{% endunless %}

                {% assign has_archive_data = true %}

                {% if ind.target_number != last_archive_target %}

                {% if last_archive_target != "" %}<hr class="goal-page-target-rule">{% endif %}

                {% assign archive_key = ind.target_number | replace: ".", "-" | append: "-a" %}

                <div class="row align-items-start goal-target">
                    <div class="col-auto"><h3>{{ ind.target_number }}</h3></div>
                    <div class="col">
                        <h3>
                            {{ site.data.translations[page.language].archive_targets[archive_key] | default: "Архівне завдання" }}
                        </h3>
                    </div>
                </div>

                {% assign last_archive_target = ind.target_number %}
                {% endif %}

                <div class="row align-items-start goal-indicator" style="margin-left: 20px;">
                    <div class="col-auto"><h4>{{ ind.number | replace: ".a", "" }}</h4></div>
                    <div class="col"><a href="{{ ind.url }}">{{ ind.name  }}</a></div>
                    {% include components/indicator/tags.html tags=ind.tags reporting_status=true indicator=ind %}
                </div>
                {% endfor %}

                {% if has_archive_data %}
                <hr class="goal-page-target-rule">
                {% else %}
                <div class="container"><p>Архівні дані для цієї цілі відсутні.</p></div>
                {% endif %}
            </div>
        </div>

    </div>
    {% include back-to-top.html %}
</div>

{% include footer.html %}
